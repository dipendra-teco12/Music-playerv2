<div class="container-box" style="margin-top: 15px">
  <div id="summernote"></div>
  <button id="save-btn" class="btn btn-primary">Save</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
  $(document).ready(function () {
    $("#summernote").summernote({
      placeholder: "Type here...",
      tabsize: 2,
      height: 550,
    });
    axios
      .get("/admin/privacy-policy")
      .then(function (response) {
        if (response.data && response.data.policy.html) {
          $("#summernote").summernote("code", response.data.policy.html);
        }
        // console.log(response.data.policy.html);
      })
      .catch(function (error) {
        console.error("Error loading privacy policy:", error);
      });
    $(document).on("hidden.bs.modal", ".note-modal", function () {
      // Move focus to Summernote editor or any safe
      $(".note-editable").focus();
    });
  });

  $("#save-btn").on("click", async function () {
    // Use your existing modal function if available, otherwise use confirm
    const confirmed =
      typeof showModal === "function"
        ? await new Promise((resolve) => {
            showModal({
              title: "Save Privacy Policy",
              message: "Are you sure you want to save this privacy policy?",
              confirmText: "Save",
              onConfirm: () => resolve(true),
              onCancel: () => resolve(false),
            });
          })
        : confirm("Are you sure you want to save this privacy policy?");

    if (!confirmed) return;
    // Get the HTML (formatted) content from Summernote
    const htmlContent = $("#summernote").summernote("code");
    // console.log(htmlContent);

    // Send the HTML content to the server using Axios
    axios
      .post("/admin/save-privacy", { html: htmlContent })
      .then(function (response) {
        // console.log("Data saved successfully:", response.data);
        // alert("Privacy policy saved!");
      })
      .catch(function (error) {
        console.error("Error saving data:", error);
        alert("Failed to save privacy policy.");
      });
  });
</script>
